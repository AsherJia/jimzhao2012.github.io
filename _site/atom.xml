<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
   <title>jimzhao.com</title>
   <link href="http://jimzhao.com/atom.xml" rel="self" type="application/atom+xml"/>
   <link href="http://jimzhao.com" rel="alternate" type="text/html" />
   <updated>2013-12-26T19:26:38+08:00</updated>
   <id>http://jimzhao.com</id>
   <author>
     <name></name>
     <email></email>
   </author>

   
   <entry>
     <title>Hybrid framework</title>
     <link href="http://jimzhao.com/whf-doc"/>
     <updated>2013-12-25T00:00:00+08:00</updated>
     <id>http://jimzhao.com/whf-doc</id>
     <content type="html">&lt;p&gt;&lt;img src=&quot;/images/Mou_128.png&quot; alt=&quot;Mou icon&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;1.平台概述&lt;/h2&gt;

&lt;h3&gt;1.1. 介绍&lt;/h3&gt;

&lt;p&gt;WHF移动开发平台是基于HTML5技术的跨平台快速开发解决方案。开发者利用HTML5+CSS3+JavaScript技术可以快速的开发与本地应用相媲美的应用，并可以和ctrip现有账号/业务系统完美结合。&lt;/p&gt;

&lt;h3&gt;1.2. 组成部分&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;1. WHF基础库中间件；&lt;/code&gt;&lt;br/&gt;提供平台接口库，对一些常用的基础功能进行包装，并提供JS库给开发者使用；&lt;br/&gt;
&lt;code&gt;2.  WHF-Ctrip业务相关中间件；&lt;/code&gt;&lt;br/&gt;提供接口，对Ctrip业务相关功能(例如用户相关)进行包装，并提供JS库给开发者使用；&lt;br/&gt;&lt;code&gt;3. URL Scheme；&lt;/code&gt;&lt;br/&gt;提供文档，开发者按照文档拼装ctrip格式URL schema，可以跳转到ctrip app的各个页面；&lt;br/&gt;&lt;code&gt;4. UI方案支持(TODO)&lt;/code&gt;&lt;br/&gt;基于现有UI方案(比如JQuery Mobile UI)，封装符合ctrip UI风格的控件库，方便开发者使用；&lt;br/&gt;&lt;/p&gt;

&lt;h3&gt;1.3. 平台特色&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;支持Webapp包自动/手动在线更新&lt;/li&gt;&lt;li&gt;支持多窗口webapp&lt;/li&gt;&lt;li&gt;支持本地web页面和站点页面无缝跳转&lt;/li&gt;&lt;li&gt;无缝整合ctrip账号体系+业务体系&lt;/li&gt;&lt;li&gt;iOS&amp;android跨平台支持，且体验一致&lt;/li&gt;
&lt;li&gt;支持打包到本地和HTTP站点两种模式的webapp&lt;/li&gt;&lt;/ul&gt;


&lt;h2&gt;2.快速入门&lt;/h2&gt;

&lt;p&gt;下面以一个简单的Hello world页面介绍框架的使用。&lt;br/&gt;
1.创建文件夹 hello;&lt;br/&gt;
2.将bridge.js复制到该文件夹;&lt;br/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/hello.png&quot; alt=&quot;folder_png&quot; /&gt;&lt;br/&gt;&lt;/p&gt;

&lt;p&gt;3.创建index.html,并import bridge.js;&lt;br/&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script type=&quot;text/javascript&quot; src=&quot;bridge.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4.在页面加入2个测试链接&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;ul class=&quot;ul1&quot;&amp;gt;
&amp;lt;li class=&quot;li2&quot;&amp;gt;&amp;lt;aonclick=&quot;javscript:CtripUser.app_member_login()&quot;&amp;gt;登录&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;br/&amp;gt;
&amp;lt;br/&amp;gt; 
&amp;lt;li class=&quot;li2&quot;&amp;gt;&amp;lt;a href=&quot;ctrip://wireless/InlandHotel?hotelId=87120&amp;amp;cityId=2&amp;amp;checkInDate=201301220&amp;amp;checkOutDate=20131221&quot;&amp;gt;进入酒店详情页&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;br/&amp;gt;
&amp;lt;br/&amp;gt;
&amp;lt;/ul&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4.在index.html页面添加函数 app.callback();&lt;br/&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
var app = {
    callback: function(json_obj) 
    {
        var tagname = json_obj.tagname;

        if (tagname == &#39;web_view_finished_load&#39;) 
        {
            //webview载入完成，刷新顶部条
            var nav_bar_config_json = {&quot;left&quot;:[{&quot;tagname&quot;:&quot;back&quot;}], &quot;center&quot;:[{&quot;tagname&quot;:&quot;title&quot;,&quot;value&quot;:&quot;Hello, H5&quot;}], &quot;right&quot;:[{&quot;tagname&quot;:&quot;login&quot;,&quot;value&quot;:&quot;登录&quot;}]};
            var json_str = JSON.stringify(nav_bar_config_json);
            //调用刷新顶部条API
            CtripUtil.app_refresh_nav_bar(json_str);
        }
        else if (tagname == &quot;back&quot;)
        {
            //处理顶部栏的返回按钮
            History.back();
            return true;
        }
        else if (tagname == &quot;login&quot;) 
        {
            //处理登录事件
            alert(&quot;用户登录完成:&quot;+JSON.stringify(json_obj));
        }
    }
};

&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;5.将Hello文件夹zip，然后build到客户端测试，界面显示如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/demo.png&quot; alt=&quot;demo.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;6.下面是整个页面文件的代码&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
  &amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&amp;gt;
  &amp;lt;meta http-equiv=&quot;Content-Style-Type&quot; content=&quot;text/css&quot;&amp;gt;
  &amp;lt;title&amp;gt;Hello, world&amp;lt;/title&amp;gt;
   &amp;lt;meta name=&quot;viewport&quot; content=&quot;initial-scale = 1.0,maximum-scale = 1.0&quot; /&amp;gt;
  &amp;lt;meta name=&quot;CocoaVersion&quot; content=&quot;1138.23&quot;&amp;gt;
  &amp;lt;style type=&quot;text/css&quot;&amp;gt;
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; min-height: 16.0px}
    li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #2567e8}
    li.li3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
    ul.ul1 {list-style-type: disc}
  &amp;lt;/style&amp;gt;

  &amp;lt;script type=&quot;text/javascript&quot; src=&quot;bridge.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

  &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;

  var app = {
        callback: function(json_obj) {
          var tagname = json_obj.tagname;
          if (tagname == &#39;web_view_finished_load&#39;) { 
              //webview载入完成，刷新顶部条
              var nav_bar_config_json = {&quot;left&quot;:[{&quot;tagname&quot;:&quot;back&quot;}], &quot;center&quot;:[{&quot;tagname&quot;:&quot;title&quot;,&quot;value&quot;:&quot;Hello, World&quot;}], &quot;right&quot;:[{&quot;tagname&quot;:&quot;login&quot;,&quot;value&quot;:&quot;登录&quot;}]};
              var json_str = JSON.stringify(nav_bar_config_json);
              CtripUtil.app_refresh_nav_bar(json_str);
          } 
          else if (tagname == &quot;back&quot;) {
            if (history.length == 0) {
              CtripUtil.app_back_to_last_page();
            } else {
              History.back();
            }
            return true;
          }
          else if (tagname == &quot;login&quot;) {
            //处理登录事件
            alert(&quot;用户登录完成:&quot;+JSON.stringify(json_obj));
          }
        }
    };

  &amp;lt;/script&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;p class=&quot;p1&quot;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;ul class=&quot;ul1&quot;&amp;gt;
  &amp;lt;li class=&quot;li2&quot;&amp;gt;&amp;lt;a onclick=&quot;javscript:CtripUser.app_member_login()&quot;&amp;gt;登录&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;br/&amp;gt;
  &amp;lt;br/&amp;gt; 
  &amp;lt;li class=&quot;li2&quot;&amp;gt;&amp;lt;a href=&quot;ctrip://wireless/InlandHotel?hotelId=87120&amp;amp;cityId=2&amp;amp;checkInDate=201301220&amp;amp;checkOutDate=20131221&quot;&amp;gt;进入酒店详情页&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;br/&amp;gt;
  &amp;lt;br/&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;3.开发文档&lt;/h2&gt;

&lt;h3&gt;3.1 使用流程&lt;/h3&gt;

&lt;p&gt;下图是H5和Native调用的流程图&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/process.png&quot; alt=&quot;调用流出&quot; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1. App进入H5模块页面，LoadWebView;
2. Webview加载完成(WebViewDidFinishedLoad)，通过app.callback()回调tagname=web_view_finish_load给H5页面;
3. H5页面可以调用JS Lib中的所有API，例如app_login();
4. JS Lib会通过plugin方式调用native的login函数;
5. native的login函数执行完成，回调给JS Lib;
6. JS Lib将用户登录的数据回调给H5;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;说明：由于JS Lib函数调用的时候，H5页面可能尚未加载完成，因此必须等收到web_view_finish_load的回调之后;&lt;/p&gt;

&lt;h3&gt;3.2 全局数据结构&lt;/h3&gt;

&lt;p&gt;app.callback(jsonParam)函数&lt;br/&gt;&lt;/p&gt;

&lt;p&gt;app 主动调用和回调H5页面，都是通过该函数完成。因此，&lt;code&gt;所有的H5页面，都需要实现该函数&lt;/code&gt;。&lt;br/&gt; &lt;br/&gt;
jsonParam为JSON对象类型,其内部参数格式如下:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
    tagname:&quot;xxxxx&quot;,    
    param:{key1:&quot;xxx&quot;,key2:&quot;xxxa&quot;}
}   
//tagname:参数类型为字符串, 回调的事件名,不能为空;
//param: 参数类型为JSON对象, 调用/回调给H5的数据,该字段允许为空;  
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;3.3.    数据交互&lt;/h3&gt;

&lt;p&gt;总共分2部分，app调用H5，H5调用App&lt;/p&gt;

&lt;h4&gt;3.3.1. App调用H5&lt;/h4&gt;

&lt;p&gt;App调用H5分为两种，App主动调用H5，App回调H5.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;App主动调用H5&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;A.标识H5页面状态的固定回调&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1. H5页面加载完成，通知H5;
2. H5页面激活，从后台切入前台，通知H5;
3. H5页面加载完成后，切换到其它页面之后，回退回来，再次显示时候，通知H5;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;B.H5页面顶部导航栏上的按钮事件&lt;/p&gt;

&lt;p&gt;H5页码的顶部导航栏是由native实现，导航栏上面的按钮，文字，均由H5控制(有JS函数可以设置顶部导航栏内容)，因此顶部导航栏的按钮也算是H5页面的一部分，顶部按钮事件也应由H5控制；&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1.左侧返回按钮
用户点击返回，app会调用H5的app.callback({tagname:&#39;back&#39;}), H5返回true，则使用H5的返回，否则app会处理该返回事件；
2.右侧内容
右侧按钮点击，app会调用H5的app.callback({tagname:&#39;xxxx&#39;}),tagname为H5设置的该按钮的属性;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;App回调H5&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;H5调用JS Lib的函数之后，如果有数据需要返回给H5的，app会通过调用H5的app.callback({tagname:&#39;xxxx&#39;, param:{key1:&quot;xxxx&quot;, key2:&quot;xxxxx&quot;}}),将数据返回给H5

具体的各个API回调的参数格式，请参考后文[API文档];
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;3.3.2.  H5调用App&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;1.H5调用JS Lib中的API
    a.通用功能，H5页面调用JS库中的相关JS API. 具体API定义参考后面的API手册;
    b.业务相关, JS Lib中对部分有返回值的业务模块的API进行封装，例如会员登录/注册，支付业务; 

2.H5拼装ctrip:协议的URL Schema做跳转
   通过URL schema方式调用,拼装完成后，调用JS Lib里面的CtripUtil.app_open_url()函数,跳转到各个app页面。
   具体的URL Schema定义列表参考后面的URL Schema手册；
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;3.4.    调试&lt;/h3&gt;

&lt;p&gt;下文以上面demo中为例，描述了怎样将该webapp放入到app中调试&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;1.将index.html, bridge.js放入文件夹demo,使用zip压缩demo文件夹，得到demo.zip；&lt;/li&gt;
&lt;li&gt;2.iOS通过iTunes file sharing将demo.zip文件copy到目录;&lt;/li&gt;
&lt;li&gt;3.打开下图的“本地Debug”开关；&lt;/li&gt;
&lt;li&gt;4.在下图的页面中，输入新增模块的相对路径，如zip包解压之后为demo，首页地址为demo/index.html&lt;/li&gt;
&lt;li&gt;5.进入新增的webapp测试；&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/debug_1.png&quot; alt=&quot;debug_1&quot; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;a. log开关打开后，可以看到下图，灰色部分的日志，详细纪录了每一步URL跳转，JS执行及执行的结果
b. 本地Debug开关打开后，下图的通过iTunes file sharing替换webapp功能才能使用
c. 更新日志，详细纪录了H5包自动更新的没一个步骤；
d. H5-&amp;gt;App, App-&amp;gt;H5,为App和H5相互跳转的测试入口;
e. Javascript,为qunit框架对JS Lib中每个函数进行单元测试的测试框架；
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/images/debug_2.png&quot; alt=&quot;debug_log&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上图显示了日志查看功能；&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/file_sharing.png&quot; alt=&quot;debug_itunes_sharing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上图显示了iTunes file sharing的操作方式,将webapp进行zip，然后添加到携程旅行的文件共享中，然后进入测试模块即可&lt;/p&gt;

&lt;h2&gt;4.    打包&amp;amp;更新&lt;/h2&gt;

&lt;p&gt;该部分的内容都是将webapp包下载到app 本地，然后打开的方式。&lt;br/&gt;
对于所有的在线HTTP站点页面，保持URL地址不变，站点随时动态更新即可；&lt;br/&gt;&lt;/p&gt;

&lt;h3&gt;4.1  目录结构&lt;/h3&gt;

&lt;p&gt;app内部有一个指定的webapp目录，所有的hybrid app都是在这个目录下面，具体参考下图。
&lt;img src=&quot;/images/wb_struct.png&quot; alt=&quot;icon webapp struct&quot; /&gt;
开发者开发的app最终都会被下载保存到该目录，因此不能与已经存在打目录重复。在开发者站点有入口可供查询。&lt;/p&gt;

&lt;h3&gt;4.2  更新机制&lt;/h3&gt;

&lt;p&gt;1.app启动时候，会做增量更新，服务器端告诉app，是否有H5包需要更新；&lt;br/&gt;
2.如果有H5包需要更新，app会去获取所有需要更新的H5包相关信息；&lt;br/&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;H5包即为开发好的webapp的zip包，从服务器获取的主要信息有：
1.下载地址;
2.包名,包名为解压到webapp之后的名字;
3.包的md5 hash值，32位，大写;
4.包的优先级，优先级从0开始，数字越小，优先级越高
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3.app根据包的优先级下载这些需要更新或者安装的H5包；&lt;/p&gt;

&lt;h3&gt;4.3  提交方案&lt;/h3&gt;

&lt;p&gt;1.准备开发好的webapp的zip包，提供以下信息给服务器端；&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1.下载地址;
2.包名,包名为解压到webapp之后的名字;
3.包的md5 hash值，32位，大写;
4.包的优先级，优先级从0开始，数字越小，优先级越高
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2.联系App team，在App里面添加该webapp的入口；&lt;br/&gt;
3.或者直接通过其它H5 webapp/广告跳转到该webapp；&lt;/p&gt;

&lt;h2&gt;5.    常见问题FAQ&lt;/h2&gt;

&lt;p&gt;1.何时可以调用JS Lib里面的API？&lt;br/&gt;
答：收到app回调给H5页面web_view_finished_load的回调之后可以调用；&lt;br/&gt;&lt;br/&gt;
2.Webview缓存为何无法清空？&lt;br/&gt;答：为解决该问题，请点击H5页面左下角的刷新按钮，手动强制刷新。&lt;br/&gt;&lt;br/&gt;
3.为什么会出现白屏的情况？&lt;br/&gt;
答：出现白屏的情况有很多，归纳下来&lt;br/&gt;
a.程序bug，比如页面有网络请求，请求完成之后，页面才渲染，这个时候，如果网络状况不好，就会出现白屏,解决方面，H5页面不要用阻塞加载，不要去等待网络请求数据返回；&lt;br/&gt;
b.app的webview有bug，这个是系统控件的不稳定性导致的，测试过程中出现比例很小；&lt;br/&gt;
c.android上面，某些URL(比如URL带＃)无法调整，出现页面无法打开的错误白屏页面，这个是由于在某些2.3固件ROM上出现的问题，对特殊URL解析失败；&lt;br/&gt;&lt;br/&gt;
4.增量更新包无法更新成功？&lt;br/&gt;
答：因为更新逻辑比较复杂，请查看H5设置页面里面的更新日志，有详细的纪录，所有的更新步骤都有&lt;br/&gt;&lt;/p&gt;

&lt;h2&gt;6.    API手册&lt;/h2&gt;

&lt;p&gt;&lt;nav&gt;
 &lt;li&gt;&lt;a href=&quot;out/index.html&quot;&gt;JS API Doc&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;urlschema.html&quot;&gt;URL shcema Doc&lt;/a&gt;&lt;/li&gt;
&lt;/nav&gt;&lt;/p&gt;

&lt;p&gt;app主动回调H5页面&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;回调tagname                  &lt;/th&gt;
&lt;th&gt; 描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;web_view_finished_load      &lt;/td&gt;
&lt;td&gt; H5页面加载完成&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;web_view_did_appear         &lt;/td&gt;
&lt;td&gt; H5页面加载完成后，切换到其它页面之后，回退回来，再次显示时候，通知H5。可能会带有上个H5页面的参数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;web_view_did_active         &lt;/td&gt;
&lt;td&gt; H5页面激活，从后台切入前台，通知H5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;back                        &lt;/td&gt;
&lt;td&gt; 用户点击导航栏左上角的返回按钮，H5页面对该tagname要有返回值，返回true，表示H5页面已经处理返回事件，否则会调用native的返回事件&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;h2&gt;7.TODO List&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;1.UI框架&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;基于JQuery Mobile 开发UI框架&lt;/p&gt;

&lt;p&gt;&lt;code&gt;2.开发框架原则确定&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;1.业务无关，通用功能，JS API实现；比如文件读写&lt;br/&gt;
2.ctrip业务相关，H5调用之后，必须返回数据给H5页面的，JS API实现；比如登录／支付&lt;br/&gt;
3.ctrip业务相关，H5调用之后，无需返回数据给H5页面的，URL Schema实现；比如酒店详情页 &lt;br/&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;3.JS API的整理和完善:公共API＋Ctrip业务API&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;基础框架(公共API)&lt;br/&gt;
参考appcan，整理出基础模块API&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;定义              &lt;/th&gt;
&lt;th&gt;   描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ct_CONSTANT     &lt;/td&gt;
&lt;td&gt;   定义一组常量&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_ErrorCode    &lt;/td&gt;
&lt;td&gt;   定义一组错误代码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Call         &lt;/td&gt;
&lt;td&gt;   电话相关API&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Camera       &lt;/td&gt;
&lt;td&gt;   相机调用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_ImagePicker  &lt;/td&gt;
&lt;td&gt;   读写图片&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Clipboard    &lt;/td&gt;
&lt;td&gt;   粘贴板读写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Contact      &lt;/td&gt;
&lt;td&gt;   联系人选取/新增&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_DataBaseMgr  &lt;/td&gt;
&lt;td&gt;   KV数据库读写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Device       &lt;/td&gt;
&lt;td&gt;   设备硬件相关信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_DownloaderMgr&lt;/td&gt;
&lt;td&gt;   下载控件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Email        &lt;/td&gt;
&lt;td&gt;   email控件调用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_FileMgr      &lt;/td&gt;
&lt;td&gt;   文件管理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Location     &lt;/td&gt;
&lt;td&gt;   定位管理&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Log          &lt;/td&gt;
&lt;td&gt;   log读写&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Share        &lt;/td&gt;
&lt;td&gt;   分享控件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_SMS          &lt;/td&gt;
&lt;td&gt;   短信调用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ct_Application  &lt;/td&gt;
&lt;td&gt;   应用相关信息，沙盒目录信息&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;p&gt;ctrip业务框架(Ctrip业务API)&lt;br/&gt;
整理出那些业务模块是需要包装给H5使用的，然后抽象并提供接口；&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;定义              &lt;/th&gt;
&lt;th&gt;   描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ct_User         &lt;/td&gt;
&lt;td&gt;   用户登录注册&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ct_Pay          &lt;/td&gt;
&lt;td&gt;   支付控件&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

</content>
   </entry>
   
   <entry>
     <title>Welcome</title>
     <link href="http://jimzhao.com/welcome"/>
     <updated>2013-12-25T00:00:00+08:00</updated>
     <id>http://jimzhao.com/welcome</id>
     <content type="html">&lt;p&gt;欢迎使用Ctrip Hybrid 开发框架。&lt;/p&gt;

&lt;p&gt;该文档的主要阅读者为：H5开发人员，广告网页设计人员。&lt;/p&gt;

&lt;p&gt;通过该文档的阅读，开发者能开发出内嵌在携程无线客户端的独立功能的 webapp， 或者是和app有密切交互的广告页面。&lt;/p&gt;

&lt;p&gt;如有任何问题，请
&lt;a href=&quot;mailto:xgzhao@ctrip.com&quot;&gt;Email&lt;/a&gt;我。&lt;/p&gt;
</content>
   </entry>
   
   <entry>
     <title>手动测试</title>
     <link href="http://jimzhao.com/manual-test"/>
     <updated>2013-12-25T00:00:00+08:00</updated>
     <id>http://jimzhao.com/manual-test</id>
     <content type="html">&lt;p&gt; &lt;style type=&quot;text/css&quot;&gt;
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; min-height: 16.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
    li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #2567e8}
    li.li3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
    span.s1 {text-decoration: underline}
    ul.ul1 {list-style-type: disc}
  &lt;/style&gt;&lt;/p&gt;

&lt;p&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/code/bridge.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;  &lt;script type=&quot;text/javascript&quot;&gt;
  function testJs() {
    alert(&#39;Js alert, invoke js function from OC&#39;);
    return &quot;alert result NULL&quot;;
  }&lt;/p&gt;

&lt;p&gt;  var app = {
        callback: function(jsonobj) {
          var tagname = jsonobj.tagname;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;      if ( tagname == &#39;back&#39;) {
        History.back();
      }
      else if (tagname == &quot;member_login&quot;) {
        alert(&quot;手动登录:&quot;+JSON.stringify(jsonobj));
      }
      else if (tagname == &quot;member_register&quot;) {
        alert(&quot;用户注册:&quot;+JSON.stringify(jsonobj));
      }
    }
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;  &lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;ul class=&quot;ul1&quot;&gt;
   &lt;li class=&quot;li2&quot;&gt;&lt;a href=&quot;ctrip://mainpage?id=132&amp;title=xmxxx&quot;&gt;WinPhone link ctrip://mainpage?id=132&amp;amp;title=xmxxx&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
   &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUser.app_member_login()&quot;&gt;1. 登录&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUser.app_member_register()&quot;&gt;2. 用户注册&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUtil.app_cross_package_href(&#39;myctrip&#39;, &#39;index.html#common/about?newVer=1&#39;)&quot;&gt;3. 跨包跳转&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUtil.app_show_newest_introduction()&quot;&gt;4. 新版本欢迎页&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
   &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUtil.app_open_url(&#39;http://www.baidu.com&#39;, 2, &#39;Baidu&#39;)&quot;&gt;5. 打开Baidu&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
   &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUtil.app_recommend_app_to_friends()&quot;&gt;6. 推荐携程旅行给好友&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javscript:CtripUtil.app_add_weixin_friend()&quot;&gt;7. 添加微信好友&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javascript:CtripUtil.app_call_phone(&#39;13800000000&#39;)&quot;&gt;8. 拨打电话&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javascript:CtripUtil.app_back_to_home()&quot;&gt;9. 返回首页&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javascript:CtripUtil.app_back_to_last_page(&#39;xxxxxxx&#39;)&quot;&gt;10. 返回上一页面&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&quot;javascript:CtripUtil.app_call_phone(&#39;13800138000&#39;)&quot;&gt;11. 拨打电话&lt;/a&gt;&lt;/li&gt;
  &lt;br/&gt;
  &lt;li class=&quot;li2&quot;&gt;&lt;a onclick=&#39;javascript:CtripUtil.app_call_system_share(&quot;http://tongqu.me/upload/photos/acts/normal/norm_2013-12-16-18-56373487fcfe4cb0ecd21c129e1164cc976ab3bf78.jpg&quot;, null, &quot;text here&quot;)&#39;&gt;12. 调用系统分享_5.3&lt;/a&gt;
   &lt;/li&gt;
  &lt;br/&gt;&lt;/p&gt;
</content>
   </entry>
   
 
</feed>
