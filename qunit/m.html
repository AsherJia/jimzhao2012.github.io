<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>H5&navtive test</title>
  <meta name="Generator" content="Cocoa HTML Writer"> 

 <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
  <meta name="CocoaVersion" content="1138.23">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; min-height: 16.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
    li.li2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #2567e8}
    li.li3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
    span.s1 {text-decoration: underline}
    ul.ul1 {list-style-type: disc}
  </style>

  <script type="text/javascript" src="/code/bridge.js"></script>

  <script type="text/javascript">
  function testJs() {
    alert('Js alert, invoke js function from OC');
    return "alert result NULL";
  }

  var app = {
        callback: function(jsonobj) {
          var tagname = jsonobj.tagname;

          if ( tagname == 'back') {
            History.back();
          }
          else if (tagname == "member_login") {
            alert("手动登录:"+JSON.stringify(jsonobj));
          }
          else if (tagname == "member_register") {
            alert("用户注册:"+JSON.stringify(jsonobj));
          }
          else if (tagname == "download_data") {
            alert("下载图片:"+JSON.stringify(jsonobj));
          }
          else if (tagname == "send_http_pipe_request") {
            alert("HTTP管道:"+JSON.stringify(jsonobj));
          }
        }
    };

    function doubleAction() {
      CtripUtil.app_open_url('http://jimzhao2012.github.io/qunit/a.html', 2, 'Auto Test');
    }
    function tripleAction() {
      CtripUtil.app_open_url('http://www.baidu.com/', 2, 'Baidu');
      CtripUtil.app_back_to_last_page("xxxx", true);
    }

    function doButtonTest() {
      var nav_bar_config_json = {"left":[{"tagname":"back"}], "centerButton":[{"tagname":"centenAction","value":"上海城市","i_icon":"icon_arrowx.png","a_icon":"icon_arrowx"}], "right":[{"tagname":"call"}, {"tagname":"home"}]};
      var jsonStr = JSON.stringify(nav_bar_config_json);
      CtripUtil.app_refresh_nav_bar(jsonStr);
    }

    var bflag = false;
    
    function doNavBarHiddenTest() {
      CtripBar.app_set_navbar_hidden(bflag);
      bflag = !bflag;
    }

    function doHTTPSInValidDownloadTest() {
      CtripUtil.app_download_data('https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew.do?module=login&rand=sjrand&t=0.48812331395048034835','jpeg',true);
    }
    
    function doHTTPSValidDownloadTest() {
      CtripUtil.app_download_data('https://github.com/apple-touch-icon-114.png','jpeg',false);
    }

    function doHTTPPipeTest() {
//GET http://www.baidu.com/s?wd=good+day&rsv_bp=0&ch=&tn=baidu&bar=&rsv_spt=3&ie=utf-8&rsv_sug3=4&rsv_sug4=469&rsv_sug1=2&rsv_sug2=0&inputT=166
    
      var paramArr = new Array();
      paramArr[0]="wd=good+day";
      paramArr[1]="rsv_bp=0";
      paramArr[2]="ch=";
      paramArr[3]="tn=";
      paramArr[4]="baidu=";
      paramArr[5]="bar=";
      paramArr[6]="rsv_spt=3";
      paramArr[7]="ie=utf-8";
      paramArr[8]="rsv_sug3=4";
      paramArr[9]="rsv_sug4=469";
      paramArr[10]="rsv_sug1=2";
      paramArr[11]="rsv_sug2=0";
      paramArr[12]="inputT=166";
      //。。。。其它参数依次类推，请做好参数的Encode，app端只负责拼接

      CtripPipe.app_send_HTTP_pipe_request("http://www.baidu.com", "/s","GET",null,paramArr, "13222222");
    }

 function dobase64test() {


 }
  </script>

  <script>
    var mapEn = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split('');

    var mapDe = {};

    for(var i=0; i<64; i++)

           mapDe[mapEn[i]] = i;

    /*

    * 函数: Base64Encode

    * 说明: 编码

    */

    function Base64Encode(data)

    {

           var buf = [];

           var map = mapEn;

           var n = data.length;       //总字节数

           var val;                            //中间值

           var i = 0;

           /*

            * 3字节 ==> val ==> 4字符

            */

           while(i < n)

           {

                  val = (data[ i ] << 16)       |

                           (data[i+1] << 8)       |

                           (data[i+2]);

                  buf.push(map[val>>18],

                                 map[val>>12 & 63],

                                 map[val>>6 & 63],

                                 map[val & 63]);

                  i += 3;

           }

           if(n%3 == 1)                            //凑两个"="

                  buf.pop(),buf.pop(),buf.push('=', '=');

           else                                          //凑一个"="

                  buf.pop(),buf.push('=');

           return buf.join('');

    }

    /*

    * 函数: Base64Decode

    * 说明: 解码

    */

    function Base64Decode(str)

    {

           var buf = [];

           var arr = str.split('');

           var map = mapDe;

           var n = arr.length;              //总字符数

           var val;                            //中间值

           var i=0;

           /*

            * 长度异常

            */

           if(n % 4)

                  return;

           /*

            * 4字符 ==> val ==> 3字节

            */

           while(i < n)

           {

                  val = (map[arr[ i ]] << 18) |

                           (map[arr[i+1]] << 12) |

                           (map[arr[i+2]] << 6)  |

                           (map[arr[i+3]]);

                  buf.push(val>>16,

                                 val>>8 & 0xFF,

                                 val & 0xFF);

                  i += 4;

           }

           /*

            * 凑字字符"="个数

            */

           while(arr[--n] == '=')

                  buf.pop();

           return buf;

    }

</script>

</head>
<body>

<p class="p1"><br></p>
<p class="p1"><br></p>
<p class="p1"><br></p>
<p class="p1"><br></p>
<ul class="ul1">
   <li class="li2"><a onclick='javascript:CtripUtil.app_call_system_share("",  "A这%a5个是分享*的%2b内%20容 ， 有%空&格+和 + 加#号", "这是标题", "http://www.ctrip.com/",true)'>A_iOS6系统分享API</a></li>
  <br/>
   <li class="li2"><a onclick='javascript:CtripUtil.app_call_system_share("",  "E这%a5个是分享*的%2b内%20容 ， 有%空&格+和 + 加#号", "这是标题", "http://www.ctrip.com/",false)'>E_App分享API</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:doButtonTest()">doButtonTest</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:dobase64test()">doButtonTest</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:doHTTPSInValidDownloadTest()">doHTTPSInValidDownloadTest</a></li>
  <br/>
 <li class="li2"><a onclick="javascript:doHTTPSValidDownloadTest()">doHTTPSValidDownloadTest</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:doHTTPPipeTest()">doBaidu5HTTPPipeTest</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:doNavBarHiddenTest()">doNavBarHiddenTest</a></li>
  <br/>
   <li class="li2"><a onclick="javascript:doubleAction()">JSLib自动化测试</a></li>
  <br/>
   <li class="li2"><a onclick="javascript:doubleAction()">Double click LA</a></li>
  <br/>
    <li class="li2"><a onclick="javascript:tripleAction()">Triple click LA</a></li>
  <br/>
   <li class="li2"><a onclick="javascript:CtripUser.app_member_login()">1. 登录</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUser.app_member_register()">2. 用户注册</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_cross_package_href('myctrip', 'index.html#common/about?newVer=1')">3. 跨包跳转</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_show_newest_introduction()">4. 新版本欢迎页</a></li>
  <br/> 
   <li class="li2"><a onclick="javascript:CtripUtil.app_open_url('http://www.baidu.com', 2, 'Baidu')">5. 打开Baidu3</a></li>
  <br/> 
  <li class="li2"><a onclick="javascript:CtripUtil.app_open_url('ctrip://wireless/destination/toTicketBook?id=1644501&name=厦门世界名人馆门票', 1, 'Baidu')">5. 打开ctrip</a></li>
  <br/> 
   <li class="li2"><a onclick="javascript:CtripUtil.app_recommend_app_to_friends()">6. 推荐携程旅行给好友</a></li>
  <br/> 
  <li class="li2"><a onclick="javascript:CtripUtil.app_add_weixin_friend()">7. 添加微信好友</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_call_phone('13800000000')">8. 拨打电话13800000000</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_call_phone('138-0000-0000')">8. 拨打电话138-0000-0000</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_call_phone('')">8. 拨打电话Empty</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_back_to_home()">9. 返回首页</a></li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_back_to_last_page('xxxxxxx')">10. 返回上一页面</a></li>
  <br/>
  <li class="li2"><a onclick='javascript:CtripUtil.app_call_system_share("http://tongqu.me/upload/photos/acts/normal/norm_2013-12-16-18-56373487fcfe4cb0ecd21c129e1164cc976ab3bf78.jpg", null, "text here")'>12. 调用系统分享_5.3</a>
   </li>
  <br/>
  <li class="li2"><a onclick="javascript:CtripUtil.app_open_other_app('com.tencent.mm', null, 'weixin://xxxx')">11. 打开其它应用_weixin</a></li>
  <br/>

</body></html>
